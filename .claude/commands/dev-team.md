---
description: GitHub Issueからの開発実行（強化版） - 検証ゲート付きで確実な開発完了を保証
category: development
complexity: advanced
mcp-servers: [sequential, serena, context7]
personas: [software-architect-designer, backend-engineer, frontend-ui-ux-engineer, test-engineer, quality-engineer]
---

# 開発チーム実行（強化版）

## 使い方

```bash
/dev-team [issue-number] [--validate] [--checkpoint] [--atomic]
```

### パラメータ

| パラメータ | 説明 | 例 |
|-----------|------|-----|
| `issue-number` | GitHub Issue番号 | `#123` |
| `--validate` | 各フェーズで検証実行（デフォルト：有効） | `--validate` |
| `--checkpoint` | 進捗チェックポイント作成 | `--checkpoint` |
| `--atomic` | タスクごとに確認を求める | `--atomic` |

## ステップ0: 事前検証

### CLAUDE.mdの確認

!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "📄 CLAUDE.md確認"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

!if [ -f "CLAUDE.md" ]; then
  echo "✅ CLAUDE.mdが存在します"
  echo "ビルド、テスト、品質チェックのコマンドを確認してください"
else
  echo "⚠️ 警告: CLAUDE.mdが存在しません"
  echo "プロジェクト固有のコマンドを確認してください"
fi

### プロジェクト状態の確認

!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "🔍 プロジェクト状態の検証"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"

!echo "### ビルド状態確認"
!echo "プロジェクトのビルドコマンドを実行（CLAUDE.mdに記載）"

!echo ""
!echo "### 既存テスト状態"
!echo "プロジェクトのテストコマンドを実行（CLAUDE.mdに記載）"

!echo ""
!echo "### コード品質チェック"
!echo "プロジェクトのリント/フォーマッターを実行（CLAUDE.mdに記載）"

!if [ $? -ne 0 ]; then
  echo "⚠️ 警告: プロジェクトに既存の問題があります"
  echo "続行しますか？ (開発中に修正が必要になる可能性があります)"
fi

## ステップ1: タスク分解と計画

### Issue内容の読み込みと分析

!echo "GitHub Issueを分析中: $1"

設計書とタスクを特定：

!find .specs -name "tasks.md" -type f | head -5

### タスク複雑度の評価

!echo ""
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "📊 タスク複雑度分析"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"

@.specs/*/tasks.md

タスク数とリスクレベルを評価：
- タスク数が10以上 → 高複雑度
- DB変更を含む → リスク高
- 破壊的変更を含む → 要注意
- 外部サービス連携 → 統合テスト必須

## ステップ2: 実装フェーズ（検証ゲート付き）

### フェーズ1: 基盤実装

!echo ""
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "🔨 フェーズ1: 基盤実装"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"

エージェントへの指示（強化版）：

```
あなたは優秀な開発者です。
プロジェクトの技術スタックに応じて適切なエージェントを使用してください：
- バックエンド: @agent-backend-engineer
- フロントエンド: @agent-frontend-ui-ux-engineer
- モバイル: @agent-mobile-app-developer
- Python: @agent-python-expert

以下のタスクを実装してください：

**重要な実装ルール：**
1. 各タスク実装後、必ずビルドを確認
2. 型エラーがある場合は修正してから次へ
3. 破壊的変更は慎重に（既存テストを壊さない）
4. 実装完了の定義：
   - コードが書かれている
   - プロジェクトのビルドが成功する（CLAUDE.md参照）
   - 静的解析が通る（型チェック、リンター等）

**タスク完了マークのルール：**
- ビルド成功時のみ [x] マーク
- ビルドエラーがある場合は [⚠️] マークで問題を記載
- 未着手は [ ] のまま

実装するタスク：
- [フェーズ1のタスクリスト]

実装後、以下を必ず実行：
1. CLAUDE.mdに記載のビルドコマンドを実行
2. ビルド結果を確認
3. エラーがあれば修正
4. tasks.mdを更新（成功時のみ[x]マーク）
```

### 検証ゲート1: ビルド確認

!echo ""
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "🔍 検証ゲート1: ビルド確認"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"

!echo "プロジェクトのビルドコマンドを実行（CLAUDE.md参照）"
!echo "ビルド結果をここに表示"

!if [ $? -ne 0 ]; then
  echo "❌ ビルドエラーを検出"
  echo "修正が必要です。エージェントに修正を依頼..."
  # 修正エージェントを呼び出し
else
  echo "✅ ビルド成功"
fi

### フェーズ2: テスト実装（実行検証付き）

!echo ""
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "🧪 フェーズ2: テスト実装"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"

テストエージェントへの指示（強化版）：

```
あなたは優秀なQAスペシャリストです。
@agent-test-engineer と @agent-quality-engineer の指示に従ってください。
以下のテストを実装してください：

**重要なテストルール：**
1. テストを作成したら必ず実行
2. 全てのテストがパスすることを確認
3. カバレッジを測定
4. 失敗したテストは修正

**テスト完了の定義：**
- テストコードが存在する
- テストが実行できる（CLAUDE.mdのテストコマンド）
- 全アサーションがパスする
- カバレッジが基準を満たす（80%以上）

**タスク完了マークのルール：**
- 全テストパス時のみ [x] マーク
- 一部失敗時は [⚠️] マークで失敗数を記載
- テストエラー時は [ ] のままで原因を記載

実装するテスト：
- [フェーズ2のテストタスク]

各テスト作成後：
1. CLAUDE.mdに記載のテストコマンドで作成したテストを実行
2. 失敗したら修正
3. 全パスを確認してからtasks.md更新
```

### 検証ゲート2: テスト実行

!echo ""
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "🔍 検証ゲート2: テスト実行"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"

!echo "### ユニットテスト実行"
!echo "CLAUDE.mdに記載のテストコマンドを実行"

!echo ""
!echo "### テストカバレッジ確認"
!echo "プロジェクトのカバレッジ測定コマンドを実行（存在する場合）"

!echo ""
!echo "### E2Eテスト実行（必要な場合）"
!echo "プロジェクトの統合テスト/E2Eテストを実行（存在する場合）"

### チェックポイント作成

!if [[ "$ARGUMENTS" == *"--checkpoint"* ]]; then
  echo ""
  echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
  echo "💾 チェックポイント作成"
  echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
  
  # 現在の進捗をメモリに保存
  echo "進捗状況を保存中..."
  echo "- ビルド状態"
  echo "- テスト結果"
  echo "- 完了タスク"
  echo "- ブロッカー"
fi

## ステップ3: 最終検証

### 統合確認

!echo ""
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "✅ 最終検証"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"

!echo "### 全体ビルド"
!echo "CLAUDE.mdに記載のビルドコマンドを実行"

!echo ""
!echo "### 全体テスト"
!echo "CLAUDE.mdに記載のテストコマンドを実行"

!echo ""
!echo "### コード品質チェック"
!echo "CLAUDE.mdに記載の品質チェックコマンドを実行"

!echo ""
!echo "### プロジェクト固有の検証"
!echo "CLAUDE.mdに記載の追加検証コマンドを実行（存在する場合）"

### 完了条件の確認

!echo ""
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "📋 完了条件チェックリスト"
!echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
!echo "□ 全タスクが実装済み"
!echo "□ ビルドが成功"
!echo "□ 全テストがパス"
!echo "□ リントエラーなし"
!echo "□ 型エラーなし"
!echo "□ カバレッジ基準達成"
!echo "□ ドキュメント更新済み"

## アトミックモード

!if [[ "$ARGUMENTS" == *"--atomic"* ]]; then
  echo ""
  echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
  echo "⚛️ アトミックモード有効"
  echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━"
  echo ""
  echo "各タスク完了時に確認を求めます："
  echo "- タスクT001完了 → ユーザー確認 → 次へ"
  echo "- 問題があれば修正してから続行"
  echo "- より確実だが時間がかかります"
fi

## エラーリカバリー

問題が発生した場合の対処：

1. **ビルドエラー**
   - エラー内容を分析
   - 修正エージェントに委託
   - 再度ビルド確認

2. **テスト失敗**
   - 失敗理由を特定
   - コードまたはテストを修正
   - 再実行して確認

3. **コンテキスト不足**
   - チェックポイントから再開
   - 必要な情報を補完
   - 小さい単位で実行

## 使用例

```bash
# 基本実行（検証ゲート付き）
/dev-team #123

# チェックポイント付き実行
/dev-team #123 --checkpoint

# アトミックモード（タスクごと確認）
/dev-team #123 --atomic

# 検証スキップ（非推奨）
/dev-team #123 --no-validate
```

## 注意事項

- 検証ゲートにより時間はかかるが、確実性が向上
- アトミックモードは最も安全だが最も時間がかかる
- 大規模タスク（10個以上）はアトミックモード推奨
- DB変更を含む場合は必ずチェックポイント使用